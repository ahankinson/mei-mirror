<?xml version="1.0" encoding="UTF-8"?>
<!--
  © 2010 by the Music Encoding Initiative (MEI) Council.
  Licensed under the Creative Commons Attribution-NoDerivs Unported License, 
  Version 3.0 (the "License"); you may not use this file except in compliance with the License.
  You may obtain a copy of the License at http://creativecommons.org/licenses/by-nd/3.0/.
-->

<div xmlns="http://www.tei-c.org/ns/1.0" type="div1" xml:id="analysis" n="0">
    <head>Analytical Information</head>
    <p>This chapter describes the use of attributes that capture data which may be useful for
        analytical purposes. The analysis module provides attributes that record relationships
        between entities found in the encoding. These attributes may be used differently by
        different users, depending on the purpose of the analysis. These Guidelines recommend that
        encoders employ commonly accepted analytical practices, such as "functional analysis" or
        "Schenkerian analysis", and document their use in the <gi>encodingDesc</gi> described in
        section <ptr target="#encodingDescription"/>. For general information on musical analysis,
        please consult Grove Music Online, "<ref
            target="http://www.oxfordmusiconline.com/subscriber/article/grove/music/41862pg1#S41862.1"
            >Analysis</ref>".</p>
    <div type="div3">
        <head>Describing Relationships Between Elements</head>
        <p>The relationships between event elements, such as note, chord, and rest, are the basic
            material of musical analysis; the analytical attributes described below ensure a closed
            network of these relations and provide the opportunity to record data useful for common
            analytical tasks.</p>
        <p> In addition to the common attributes found in the <ref target="#commonAttributes">Shared
                Module</ref>, the analysis module offers seven attributes in the att.common.anl
            class:</p>
        <p>
            <specList>
                <specDesc key="att.harmonicfunction" atts="hfunc"/>
                <specDesc key="att.intervalharmonic" atts="inth"/>
                <specDesc key="att.intervallicdesc" atts="intm"/>
                <specDesc key="att.melodicfunction" atts="mfunc"/>
                <specDesc key="att.pitchclass" atts="pclass"/>
                <specDesc key="att.solfa" atts="psolfa"/>
                <specDesc key="att.alignment" atts="when"/>
            </specList>
        </p>
        <p>It is important to note that the <att>when</att> attribute is only available when the
            linkAlign module is included because the <gi>when</gi> element, which is the target of
            the <att>when</att> attribute, is defined there.</p>
        <p>These attributes accommodate the encoding of linkages between the element carrying the
            attribute and one or more other elements. All of them use URIs to establish the link. In
            the context of a formal analysis, for instance, the attributes presented here might be
            useful to capture information about the structure of a musical work.</p>
        <p>The <att>copyof</att> attribute points to an element of which the current element is a
            copy. It can be used to repeat a note, for example, without encoding the whole
                <gi>note</gi> element again. The copy is a <soCalled>deep</soCalled>one; that is,
            the <att>copyof</att> attribute copies all attributes and child elements which belong to
            the copied element, such as the <att>dur</att> and <att>oct</att> attributes of a copied
                <gi>note</gi>. The value of the <att>copyof</att>-attribute must be a URI, which
            usually refers to an element in the current document. The following example demonstrates
            the <att>copyof</att> attribute:</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure n="1">
                <staff n="1">
                    <layer>
                        <note pname="g" oct="4" dur="4" xml:id="note1"/>
                    </layer>
                </staff>
            </measure>
            <measure n="2">
                <staff n="1">
                    <layer>
                        <note copyof="#note1"/>
                    </layer>
                </staff>
            </measure>
        </egXML>
        <p>In this example. the <gi>note</gi> in the second measure would have exactly the same
            characteristics as the <gi>note</gi> in the first <gi>measure</gi>.</p>
        <p>Using <att>copyof</att> is not limited to copying events. The <att>copyof</att> attribute
            can also be used to copy an entire <gi>measure</gi> or <gi>staff</gi>. When there are
            many repeated features, the use of the <att>copyof</att> greatly reduces encoding
            effort. The image and the following encoding of the beginning of Schubert's "Erlkönig"
            illustrates the benefit of using the <att>copyof</att> attribute.</p>
        <figure>
            <head>First measure of Schubert's Erlkönig</head>
            <figDesc>Opening figure</figDesc>
            <graphic url="Images/modules/analysis/chor03_m1-2.png"/>
        </figure>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure>
                <staff n="1">
                    <layer>
                        <mRest/>
                    </layer>
                </staff>
                <staff n="2">
                    <layer>
                        <tuplet xml:id="tuplet1" num="3" num.visible="true">
                            <chord dur="8">
                                <note pname="g" oct="3"/>
                                <note pname="g" oct="4"/>
                            </chord>
                            <chord dur="8">
                                <note pname="g" oct="3"/>
                                <note pname="g" oct="4"/>
                            </chord>
                            <chord dur="8">
                                <note pname="g" oct="3"/>
                                <note pname="g" oct="4"/>
                            </chord>
                        </tuplet>
                        <!-- THIS EXAMPLE DOESN'T VALIDATE BECAUSE <tuplet> REQUIRES CONTENT! ISSUE FILED. -->
                        <tuplet xml:id="tuplet2" copyof="#tuplet1"/>
                        <tuplet xml:id="tuplet3" copyof="#tuplet1"/>
                        <tuplet xml:id="tuplet4" copyof="#tuplet1"/>
                    </layer>
                </staff>
                <staff n="3">
                    <layer>
                        <mRest/>
                    </layer>
                </staff>
            </measure>
        </egXML>
        <p>This example can be reduced further by using <att>copyof</att> in the initial tuplet:</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure>
                <staff n="1">
                    <layer>
                        <mRest/>
                    </layer>
                </staff>
                <staff n="2">
                    <layer>
                        <tuplet xml:id="tuplet1" num="3" num.visible="true">
                            <chord dur="8" xml:id="t1c1">
                                <note pname="g" oct="3"/>
                                <note pname="g" oct="4"/>
                            </chord>
                            <chord copyof="#t1c1"/>
                            <chord copyof="#t1c1"/>
                        </tuplet>
                        <!-- THIS EXAMPLE DOESN'T VALIDATE BECAUSE <tuplet> REQUIRES CONTENT! ISSUE FILED. -->
                        <tuplet xml:id="tuplet2" copyof="#tuplet1"/>
                        <tuplet xml:id="tuplet3" copyof="#tuplet1"/>
                        <tuplet xml:id="tuplet4" copyof="#tuplet1"/>
                    </layer>
                </staff>
                <staff n="3">
                    <layer>
                        <mRest/>
                    </layer>
                </staff>
            </measure>
        </egXML>
        <p>While <att>copyof</att> signifies a more-or-less duplicate copy of an element, the
                <att>sameas</att> indicates that the current element represents exactly same entity
            as the one referenced in <att>sameas</att>. Use of <att>sameas</att> is used for
            describing the same entity from multiple perspectives, e.g., the same event in two
            layers. The following example illustrates the sharing of one note head between two
            voices:</p>
        <figure>
            <head>Bach Chorale</head>
            <figDesc>Ach Gott, vom Himmel sieh' darein</figDesc>
            <graphic url="Images/modules/analysis/chor03_m1-2.png"/>
        </figure>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure n="0" xml:id="mx_sc_14" left="invis" metcon="false">
                <staff n="1">
                    <layer n="1">
                        <note xml:id="n_sc_21_3" pname="b" oct="4" dur="4"/>
                    </layer>
                    <layer n="2">
                        <note xml:id="n_sc_21_2" pname="g" accid="s" oct="4" dur="4"/>
                    </layer>
                </staff>
                <staff n="2">
                    <layer n="1">
                        <note xml:id="n_sc_21_1" pname="e" oct="4" dur="4"/>
                    </layer>
                    <layer n="2">
                        <note xml:id="n_sc_21_0" pname="e" oct="3" dur="4"/>
                    </layer>
                </staff>
            </measure>
            <measure n="1" xml:id="m_sc_22">
                <staff n="1">
                    <staff n="1">
                        <layer n="1">
                            <note xml:id="n_sc_23_3" pname="c" oct="5" dur="4"/>
                            <note xml:id="n_sc_24_3" pname="b" oct="4" dur="4"/>
                            <note xml:id="n_sc_25_3" pname="a" oct="4" dur="4" sameas="n_sc_25_2"/>
                            <note xml:id="n_sc_26_3" pname="e" oct="5" dur="4"/>
                        </layer>
                        <layer n="2">
                            <note xml:id="n_sc_23_2" pname="a" oct="4" dur="4"/>
                            <note xml:id="n_sc_24_2" pname="g" accid="s" oct="4" dur="4"/>
                            <note xml:id="n_sc_25_2" pname="a" oct="4" dur="4" sameas="n_sc_25_3"/>
                            <beam>
                                <note xml:id="n_sc_26_2" pname="g" oct="4" dur="8"/>
                                <note xml:id="n_sc_27_2" pname="a" oct="4" dur="8"/>
                            </beam>
                        </layer>
                    </staff>
                </staff>
                <staff n="2">
                    <layer n="1">
                        <note xml:id="n_sc_23_1" pname="e" oct="4" dur="4"/>
                        <note xml:id="n_sc_24_1" pname="d" oct="4" dur="4"/>
                        <note xml:id="n_sc_25_1" pname="e" oct="4" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_26_1" pname="d" oct="4" dur="8"/>
                            <note xml:id="n_sc_27_1" pname="c" oct="4" dur="8"/>
                        </beam>
                    </layer>
                    <layer n="2">
                        <note xml:id="n_sc_23_0" pname="a" oct="3" dur="4"/>
                        <note xml:id="n_sc_24_0" pname="b" oct="3" dur="4"/>
                        <note xml:id="n_sc_25_0" pname="c" oct="4" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_26_0" pname="b" oct="3" dur="8"/>
                            <note xml:id="n_sc_27_0" pname="a" oct="3" dur="8"/>
                        </beam>
                    </layer>
                </staff>
            </measure>
            <measure n="2" xml:id="m_sc_28">
                <staff n="1">
                    <layer n="1">
                        <beam>
                            <note xml:id="n_sc_29_3" pname="e" oct="5" dur="8"/>
                            <note xml:id="n_sc_30_3" pname="d" oct="5" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_31_3" pname="c" oct="5" dur="4"/>
                        <note xml:id="n_sc_33_3" pname="b" oct="4" dur="4" fermata="above"/>
                        <note xml:id="n_sc_34_3" pname="d" oct="5" dur="4"/>
                    </layer>
                    <layer n="2">
                        <note xml:id="n_sc_29_2" pname="b" oct="4" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_31_2" pname="e" oct="4" dur="8"/>
                            <note xml:id="n_sc_32_2" pname="f" accid="s" oct="4" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_33_2" pname="g" accid="s" oct="4" dur="4"/>
                        <note xml:id="n_sc_34_2" pname="g" oct="4" dur="4" fermata="below"/>
                    </layer>
                </staff>
                <staff n="2">
                    <layer n="1">
                        <note xml:id="n_sc_29_1" pname="b" oct="3" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_31_1" pname="c" oct="4" dur="8"/>
                            <note xml:id="n_sc_32_1" pname="d" oct="4" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_33_1" pname="e" oct="4" dur="4" fermata="above"/>
                        <note xml:id="n_sc_34_1" pname="f" accid="n" oct="4" dur="4"/>
                    </layer>
                    <layer n="2">
                        <note xml:id="n_sc_29_0" pname="g" accid="s" oct="3" dur="4"/>
                        <note xml:id="n_sc_31_0" pname="a" oct="3" dur="4"/>
                        <note xml:id="n_sc_33_0" pname="e" oct="3" dur="4" fermata="below"/>
                        <note xml:id="n_sc_34_0" pname="b" oct="2" dur="4"/>
                    </layer>
                </staff>
            </measure>
        </egXML>
        <p>While <att>copyof</att> and <att>sameas</att> have defined semantics, the
                <att>corresp</att> may be used to create user-defined relationships between
            elements. The example below demonstrates the encoding of a relationship between #note3
            and the fermata, even though the fermata is not placed directly above the note.</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure n="1" right="end">
                <staff n="1">
                    <layer n="1">
                        <note pname="c" oct="4" dur="4" xml:id="note1"/>
                        <note pname="d" oct="4" dur="4" xml:id="note2"/>
                        <note pname="e" oct="4" dur="2" xml:id="note3"/>
                    </layer>
                </staff>
                <fermata place="above" tstamp="4.75" corresp="#note3"/>
            </measure>
        </egXML>
        <p>The <att>corresp</att> attribute only marks the correspondence between the current
            element and one or more other entities. To describe the nature of the correspondence,
            one must use <gi>annot</gi>.</p>
        <p>The <att>next</att> and <att>prev</att> attributes point to elements which follow or
            precede the current element in some fashion other than encoded order. The use of these
            attributes helps to avoids confusion in the sequence of events, for example, voice
            leading across layers or staves when the encoding reflects the physical arrangement of
            voices. In the second measure of the following example, the target of the next attribute
            occurs after the pointing element in time, but before it in encoding order:</p>
        <figure>
            <head>Bach Chorale</head>
            <figDesc>Ach Gott, vom Himmel sieh' darein</figDesc>
            <graphic url="Images/modules/analysis/chor03_m6-7.png"/>
        </figure>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure n="6" xml:id="m_sc_62">
                <staff n="1">
                    <layer n="1">
                        <note xml:id="n_sc_63_3" pname="g" oct="4" dur="4"/>
                        <note xml:id="n_sc_65_3" pname="a" oct="4" dur="4"/>
                        <note xml:id="n_sc_67_3" pname="b" oct="4" dur="4" fermata="above"/>
                        <note xml:id="n_sc_68_3" pname="g" oct="4" dur="4"/>
                    </layer>
                    <layer n="2">
                        <beam>
                            <note xml:id="n_sc_63_2" pname="e" oct="4" dur="8"/>
                            <note xml:id="n_sc_64_2" pname="g" oct="4" dur="8"/>
                        </beam>
                        <beam>
                            <note xml:id="n_sc_65_2" pname="f" oct="4" dur="8"/>
                            <note xml:id="n_sc_66_2" pname="e" oct="4" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_67_2" pname="d" accid="s" oct="4" dur="4"
                            next="n_sc_67_0"/>
                        <beam>
                            <note xml:id="n_sc_68_1" pname="e" oct="4" dur="8"/>
                            <note xml:id="n_sc_69_1" pname="d" accid="n" oct="4" dur="8"/>
                        </beam>
                    </layer>
                </staff>
                <staff n="2">
                    <layer n="1">
                        <note xml:id="n_sc_63_1" pname="b" oct="3" dur="4"/>
                        <note xml:id="n_sc_65_1" pname="c" oct="4" dur="4"/>
                        <note xml:id="n_sc_67_1" pname="f" oct="3" dur="4"/>
                        <note xml:id="n_sc_68_2" pname="b" oct="3" dur="4"/>
                    </layer>
                    <layer n="1">
                        <beam>
                            <note xml:id="n_sc_63_0" pname="e" oct="3" dur="8"/>
                            <note xml:id="n_sc_64_0" pname="d" oct="3" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_65_0" pname="c" oct="3" dur="4"/>
                        <note xml:id="n_sc_67_0" pname="b" oct="2" dur="4" fermata="below"/>
                        <note xml:id="n_sc_68_0" pname="e" oct="3" dur="4"/>
                    </layer>
                </staff>
            </measure>
            <measure n="7" xml:id="m_sc_70">
                <staff n="1">
                    <layer n="1">
                        <beam>
                            <note xml:id="n_sc_71_3" pname="a" oct="4" dur="8"/>
                            <note xml:id="n_sc_72_3" pname="b" oct="4" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_73_3" pname="c" oct="5" dur="4"/>
                        <note xml:id="n_sc_75_3" pname="b" oct="4" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_76_3" pname="c" oct="5" dur="8"/>
                            <note xml:id="n_sc_77_3" pname="b" oct="4" dur="8"/>
                        </beam>
                    </layer>
                    <layer n="2">
                        <beam>
                            <note xml:id="n_sc_71_1" pname="c" oct="4" dur="8"/>
                            <note xml:id="n_sc_72_1" pname="d" oct="4" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_73_2" pname="a" oct="4" dur="4"/>
                        <note xml:id="n_sc_75_2" pname="g" accid="s" oct="4" dur="4"/>
                        <note xml:id="n_sc_76_2" pname="a" oct="4" dur="4"/>
                    </layer>
                    <layer n="3">
                        <space dur="4"/>
                        <note xml:id="n_sc_73_1" pname="e" oct="4" dur="4"/>
                        <note xml:id="n_sc_75_1" pname="e" oct="4" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_76_1" pname="e" oct="4" dur="8"/>
                            <note xml:id="n_sc_77_1" pname="d" oct="4" dur="8"/>
                        </beam>
                    </layer>
                </staff>
                <staff n="2">
                    <layer n="1">
                        <note xml:id="n_sc_71_2" pname="a" oct="3" dur="4" next="n_sc_73_2"/>
                    </layer>
                    <layer n="2">
                        <note xml:id="n_sc_71_0" pname="f" accid="n" oct="3" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_73_0" pname="c" oct="3" dur="8"/>
                            <note xml:id="n_sc_74_0" pname="d" oct="3" dur="8"/>
                        </beam>
                        <note xml:id="n_sc_75_0" pname="e" oct="3" dur="4"/>
                        <beam>
                            <note xml:id="n_sc_76_0" pname="a" oct="2" dur="8"/>
                            <note xml:id="n_sc_77_0" pname="b" oct="2" dur="8"/>
                        </beam>
                    </layer>
                </staff>
            </measure>
        </egXML>
        <p>This attribute may also be useful to clarify a sequence of entites which occurs across
            some form of interruption, in this case, notes before and after a system or page break
            where there is no custos or direct in the source:</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <measure n="1">
                <staff n="1">
                    <layer>
                        <note pname="f" oct="4" dur="4" stem.dir="up" xml:id="m1s1e1" next="m1s1e2"/>
                        <pb/>
                        <note pname="b" oct="3" dur="8" stem.dir="up" xml:id="m1s1e2" prev="m1s1e1"
                            next="m1s1e3"/>
                        <note pname="c" oct="4" dur="8" stem.dir="up" xml:id="m1s1e3" prev="m1s1e2"
                        />
                    </layer>
                </staff>
            </measure>
        </egXML>
        <p>There can be a one-to-many relationship between the current element and the entities
            being referred to.</p>
        <p>The <att>synch</att> attribute points to an element that is synchronous with, that is,
            begins at the same moment in time, as the current element. It is useful when the
            encoding order differs from the order in which entities occur in time.</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <!-- NEED EXAMPLE HERE -->
        </egXML>
        <p>It is also useful for eliminating confusion when the source has obvious timing errors. In
            the following fictitious example, </p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <!-- NEED EXAMPLE HERE -->
        </egXML>
        <p>The <att>when</att> attribute may be used to indicate the point of occurrence of the
            feature bearing this attribute along a time line. Its value must be the ID of a
            &lt;when&gt; element. For more detailed information regarding the use of
            <att>when</att>, please see <ptr target="#linkAlign"/>.</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
            <!-- NEED EXAMPLE HERE -->
        </egXML>
        <p>The intention behind the attributes defined by the analysis module is to provide the
            opportunity to refer to other events by the use of a URI. Using these attributes makes
            it possible to create relationships between events, which are often widely-spaced in
            both encoded order and time. The attributes allow a large number of connections,
            enhancing the informational content, and therefore the potential usefulness, of the
            encoding.</p>
        <div type="div3">
            <head>Harmonic Function</head>

            <!-- inth was intended to carry numeric values (half-steps above the root), even though it seems that intention 
                        didn't get expressed properly in the move from the original RNG to ODD.  The datatype of inth should be a 
                        list of numbers, not NMTOKENS.  This is an error that should be corrected even now in the frozen 2012 release.
                        
                        remove mfunc from chord and allow it only on <note>, <ineume>, and <uneume>.  In addition, only <chord> 
                        should allow hfunc.  That leaves the resolution of the difference between hfunc and <harm>, which I believe 
                        can be drawn as "transcriptional" (<harm>) vs. "analytical" (hfunc), although when multiple analytical labels 
                        are required, as in the examples raised by Eleanor, then even the analytical labels should go in <harm>.
                        
                        The final result:
                           Elements carrying mfunc: note, ineume, uneume
                           Elements carrying hfunc: chord -->

            <p>This section makes recommendations regarding the use of the <att>hfunc</att>
                attribute to describe the harmonic function of notes and chords.</p>
            <p>
                <specDesc key="att.harmonicfunction" atts="hfunc"/>
            </p>
            <p>The term <term>functional harmony</term> derives from Hugo Riemann and his textbooks
                on harmony in the late 19th century, but the basic principles of harmonic
                relationships between notes (and the chords built upon them) were described in
                Jean-Philippe Rameau's theoretical works. These principles serve as a comprehensive
                theoretical basis for understanding harmonic relationships typical of the Baroque,
                Classical and Romantic periods.</p>
            <p>For further information about methods of harmonic analysis, please see: <list
                    type="bulleted">
                    <item>Grove Online. "Analysis, §I: General".</item>
                    <item>Forte, A. "Schenker´s Conception of Musical Structure." Journal of Music
                        Theory 3(1):1-30.</item>
                    <item>Pankhurst, Tom. "Schenker Guide: A Brief Handbook and a Website for
                        Schenkerian Analysis". Music Analysis, 28: 145-151.</item>
                </list>
            </p>
            <p>Since there are many approaches to harmonic analysis, the values chosen for
                    <att>hfunc</att> depend on the musical context and the intention of the encoder.
                For example, depending on context, a tonic chord may be labeled using natural
                language terms, such as "tonic"; abbrevations, such as "T" for "Tonika" (German); or
                Roman numerals, such as "I" or "vii". Therefore, <att>hfunc</att> allows any string
                value drawn from any convenient typology. Of course, it is recommended that the
                    <att>hfunc</att> attribute be used in a consistent manner. The example below
                demonstrates labeling the harmonic function of notes and chords using Roman
                numerals.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <!-- NEED EXAMPLE HERE -->
            </egXML>
            <p>The <gi>harm</gi> element, described in chapter <ptr target="#harmony"/> should be
                used instead of <att>hfunc</att> when the harmonic analysis occurs in the material
                being transcribed, as sometimes occurs in pedagogical editions. It should also be
                used when the harmonic label itself requires the use of markup, such as indications
                of superscript or subscript.</p>
        </div>
        <div type="div3">
            <head>Harmonic Intervals</head>
            <p>
                <specDesc key="att.intervalharmonic" atts="inth"/>
            </p>
            <p>The <att>inth</att> is used to encode the harmonic interval between the current note
                and other pitches occurring at the same moment in time. The notes of interest may or
                may not be marked as a <gi>chord</gi>. For example, </p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure>
                    <staff>
                        <layer n="1">
                            <note xml:id="e1" pname="c" oct="4" dur="4" inth="0"/>
                        </layer>
                        <layer n="2">
                            <note xml:id="e2" pname="e" oct="4" dur="4" inth="3"/>
                        </layer>
                    </staff>
                    <staff n="2">
                        <layer n="3">
                            <note xml:id="e3" pname="g" oct="4" dur="4" inth="5"/>
                        </layer>
                    </staff>
                </measure>
            </egXML>
            <p>Use of the <att>inth</att> permits detailed specification of intervallic information
                about every note and its function in relation to other simultaneously-occurring
                notes and hence about the harmonic nature of the musical work.</p>
            <p>To describe the intervals between sequential notes, use the <att>intm</att>, which is
                explained below.</p>
        </div>
        <div type="div3">
            <head>Melodic Function</head>
            <p>The <att>mfunc</att> attribute describes melodic function of a <gi>note</gi> or
                    <gi>chord</gi> in any convenient typology. For example, the values of this
                attribute could be a name or a number. <att>mfunc</att> is best used for describing
                whether notes are harmonic or nonharmonic tones, such as a passing or neighboring
                note. It may sometimes be used to describe a chord as a <soCalled>passing
                    chord</soCalled>.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure n="2">
                    <staff n="1">
                        <layer>
                            <chord dur="4" stem.dir="up" xml:id="chord1">
                                <note pname="f" oct="4" dur="4" xml:id="m2e1" mfunc="ct"/>
                                <note pname="a" oct="4" dur="4" xml:id="m2e2" mfunc="ct"/>
                                <note pname="c" oct="5" dur="4" xml:id="m2e3" mfunc="ct"/>
                            </chord>
                            <note pname="b" oct="4" dur="4" stem.dir="down" xml:id="m2e4" accid="f"
                                mfunc="nt"/>
                        </layer>
                    </staff>
                </measure>
                <measure>
                    <staff n="1">
                        <layer>
                            <chord dur="4" stem.dir="up" xml:id="chord2">
                                <note pname="c" oct="4" dur="5" xml:id="m2e5" mfunc="ct"/>
                                <note pname="e" oct="4" dur="4" xml:id="m2e6" mfunc="ct"/>
                                <note pname="g" oct="4" dur="4" xml:id="m2e7" mfunc="ct"/>
                            </chord>
                        </layer>
                    </staff>
                </measure>
            </egXML>
            <p>The attribute is also allowed on chords in order to describe those that do not have a
                harmonic function in the traditional sense:</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure n="5">
                    <staff n="1">
                        <layer>
                            <chord n="1" mfunc="Tristan_chord">
                                <note pname="f" oct="4" dur="2" dots="1"/>
                                <note pname="b" oct="4" dur="2" dots="1"/>
                                <note pname="d" accid="s" oct="3" dur="2" dots="1"/>
                                <note pname="g" accid="s" dur="2" dots="1"/>
                            </chord>
                        </layer>
                    </staff>
                </measure>
            </egXML>
        </div>
        <div type="div3">
            <head>Melodic Intervals</head>
            <p>The<att>intm</att> attribute is used to encode the melodic interval coming from the
                previous pitch using a decimal number or the Parson's Code (d/u/s). The attribute is
                only permitted on the <gi>note</gi> and the <gi>uneueme</gi>. Signed integers may be
                used to record the difference in half steps between the previous pitch and the
                current one:</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure>
                    <staff>
                        <layer>
                            <note pname="c" oct="4" dur="4"/>
                            <note pname="d" oct="4" dur="4" intm="1"/>
                            <note pname="d" oct="5" dur="4" intm="8"/>
                            <note pname="c" oct="5" dur="4" intm="-2"/>
                        </layer>
                    </staff>
                </measure>
            </egXML>
            <p>Decimal values allow the description of the interval in a more precise way, so that
                is also possible to encode microtonal intervals:</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure>
                    <staff>
                        <layer>
                            <note pname="c" oct="4" dur="4"/>
                            <note pname="d" oct="4" dur="4" intm="1.1"/>
                            <note pname="d" oct="5" dur="4" intm="7.9"/>
                            <note pname="c" oct="5" dur="4" intm="-2.334"/>
                        </layer>
                    </staff>
                </measure>
            </egXML>
            <p>While decimal values permit very a detailed description of melodic intervals, Parsons
                Code allows for description of the contour of the melody in very general terms. The
                shortcuts are intended to give the direction of the melody (up, down or the same).
                For more information about the Parsons Code, please see the "The Directory of Tunes
                and Musical Themes" by Denys Parsons (2002). The next example shows interval
                relationships indicated by the Parsons Code.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure n="1">
                    <staff n="1">
                        <layer>
                            <note pname="c" oct="4" dur="4"/>
                            <note pname="d" oct="4" dur="4" intm="u"/>
                            <note pname="e" oct="4" dur="4" intm="u"/>
                            <note pname="f" oct="4" dur="4" intm="u"/>
                            <note pname="g" oct="4" dur="2" intm="u"/>
                            <note pname="g" oct="4" dur="2" intm="s"/>
                            <note pname="f" oct="4" dur="4" intm="d"/>
                        </layer>
                    </staff>
                </measure>
            </egXML>
            <p>Parsons Code is helpful for identifying musical works with clearly defined melodies
                and analyzing the relationship between successive notes of monophonic tunes.</p>
        </div>
        <div type="div3">
            <head>Pitch Class</head>
            <p>The <att>pclass</att> attribute is used to encode information about the pitch class.
                The attribute's value must be an integer less than or equal to 11. It is only
                allowed on the <gi>note</gi> element. The <att>pclass</att> attribute comes from
                "musical set theory" elaborated first by Howard Hanson and Allen Forte as a new
                method for organizing tones. It provides a concept for categorizing musical objects
                (notes) and describing their relationships. It is a kind of grouping and combining,
                mostly developed in connection with atonal music. However, the concept of set theory
                is general and can also be applied to tonal music. A pitch class means the summary
                of every pitch with specific characteristics that means a pitch class set is an
                unordered collection of pitches, e.g. every pitches with the name c. A pitch class
                may contain a large number of pitches, because the notation, as different octaves
                and enharmonic quotation of pitch, makes no difference. The notes C, E, and G would
                be 0, 4 and 7 in pitch classes for example. For further information, a brief
                introduction to Pitch-Class Set analysis may be found at <ref
                    target="http://www.mta.ca/faculty/arts-letters/music/pc-set_project/pc-set_new/pages/introduction/toc.html"
                    >http://www.mta.ca/faculty/arts-letters/music/pc-set_project/pc-set_new/pages/introduction/toc.html</ref>.
                <!-- Is the following more detailed than the previous citation?  Or an alternative introduction? -->
                Otherwise please read the "Analyzing Atonal Music: Pitch Class Set Theory and its
                Contexts" by Michael Schuijler (2008).
                <!-- Cohen, Allen Laurence (2004) Howard Hanson in Theory and Practice-->
            </p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <note pname="d" oct="4" dur="4" pclass="2"/>
                <note pname="d" oct="5" dur="2" pclass="2"/>
                <note pname="c" accid="ss" dur="4" pclass="2"/>
                <note pname="e" accid="ff" dur="1" pclass="2"/>
            </egXML>
            <p>The example illustrates four different notes, but all are part of the same pitch
                class. A collection of examples can be found at <ref target="http://kern.ccarh.org/"
                    >http://kern.ccarh.org/</ref></p>
        </div>
        <div type="div3">
            <head>Solfa</head>
            <p>Solmization is a system which associates a syllable with each note of a musical
                scale. There are various forms of solmization used throughout the world. In Europe
                and North America, solfège is the most common practice. The seven syllables for a
                major scale are called do, re, mi, fa, so, la and ti. In the
                    <soCalled>fixed-do</soCalled> system, the syllable "do" is always associated
                with the pitch "c", while in the <soCalled>movable-do</soCalled> system, "do" is
                associated with the tonic note. The attribute is only allowed on <gi>note</gi> and
                    <gi>uneume</gi> elements. Its value is unconstrained in order to accommodate
                various solmization systems.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
                <measure>
                    <staff n="1">
                        <layer>
                            <note pname="c" oct="4" dur="4" psolfa="do"/>
                            <note pname="d" oct="4" dur="4" psolfa="re"/>
                            <note pname="e" oct="4" dur="4" psolfa="mi"/>
                            <note pname="f" oct="4" dur="4" psolfa="fa"/>
                        </layer>
                    </staff>
                </measure>
            </egXML>
        </div>
    </div>
    <div type="div2" xml:id="analysisOverview">
        <head>Overview of the Analysis Module</head>
        <p>The module described in this chapter makes available the following components:</p>
        <div type="div3" xml:id="analysisElements">
            <head>Elements</head>
            <p>The analysis module contains common analytical attributes but no additional
                elements.</p>
        </div>
        <div type="div3" xml:id="analysisAttributeClasses">
            <head>Attribute Classes</head>
            <p>The following attribute classes are defined in this module:</p>
            <p>
                <specList>
                    <specDesc key="att.common.anl"/>
                    <specDesc key="att.harmonicfunction"/>
                    <specDesc key="att.intervalharmonic"/>
                    <specDesc key="att.intervallicdesc"/>
                    <specDesc key="att.melodicfunction"/>
                    <specDesc key="att.pitchclass"/>
                    <specDesc key="att.solfa"/>
                </specList>
            </p>
        </div>
        <div type="div3" xml:id="analysisModelClasses">
            <head>Model Classes</head>
            <p>No model classes are defined in this module.</p>
        </div>
    </div>
</div>
