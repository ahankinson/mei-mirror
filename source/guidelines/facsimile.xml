<?xml version="1.0" encoding="UTF-8"?>
<!--
  © 2010 by the Music Encoding Initiative (MEI) Council.
  Licensed under the Creative Commons Attribution-NoDerivs Unported License, 
  Version 3.0 (the "License"); you may not use this file except in compliance with the License.
  You may obtain a copy of the License at http://creativecommons.org/licenses/by-nd/3.0/.
-->

<div xmlns="http://www.tei-c.org/ns/1.0" type="div1" xml:id="facsimile" n="0">
  <head>Facsimiles</head>
  <p>
    Normally, MEI is used for the preparation of a digital musical text, either based on an existing music
    document, or with the intention of rendering the encoded notation into a document or audio rendition. 
    Sometimes, however, MEI is be used to provide a different kind of digital reproduction of a source document,
    which relies on the description and provision of digital imagery. Both approaches may be combined, so that
    the encoding of the musical content and digital facsimiles may add different facets to the same MEI document.
  </p>
  <div type="div2" xml:id="facsimileElements">
    <head>Elements of the facsimile Module</head>
    <p>This module makes available the following elements for encoding facsimiles:</p>
    <p>
      <specList>
        <specDesc key="facsimile"/>
        <specDesc key="surface"/>
        <specDesc key="zone"/>
      </specList>
    </p>
    <p>
      These element are used to add a mostly separate subtree to MEI, starting with the <gi>facsimile</gi> element
      inside <gi>music</gi>, as seen in the following example:
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <mei>
          <meiHead/>
          <music>
            <facsimile>
              <!-- The facsimile subtree starts from here -->
            </facsimile>
            <body>
              <!-- The encoding of the musical content goes in here -->
            </body>
          </music>
        </mei>
      </egXML>
    </p>
    <p>
      It is possible to have more than one <gi>facsimile</gi> element in this location. This is especially useful when 
      multiple sources are encoded in the same file using the mechanisms described in chapter <ptr target="#editTrans"/>
      of these Guidelines. In this situation the <att>decls</att> (declarations) attribute may be used to refer to a source
      defined in the document's header, as seen in the following example:
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        
        <facsimile decls="#source1">
          …
        </facsimile>
        
        <!-- In document header: -->
        <source xml:id="source1">
          <!-- description of source -->
        </source>
        
      </egXML>
    </p>
    <p>
      Within a <gi>facsimile</gi> element, all individual pages of that particular source are represented using a
      <gi>surface</gi> element. They may bear a specific <att>label</att> and offer a <att>startid</att> attribute
      which allows to point to the first object appearing on that particular writing surface. 
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <facsimile>
          <surface label="page 1" startid="#measure1"/>
        </facsimile>
      </egXML>
    </p>
    <p>
      Within <gi>surface</gi>s, one may nest <gi>graphic</gi> and <gi>zone</gi>elements. Whereas <gi>graphic</gi> is used 
      in this context to give a reference to an image file of its parent <gi>surface</gi>, a <gi>zone</gi> denotes an area
      of interest on this <gi>surface</gi>. Although it is possible to combine multiple such
      elements, it is recommended to have only one <gi>graphic</gi> when operating with <gi>zone</gi>s, as otherwise the 
      positioning of these areas on the surface might be ambiguous due to differing resolutions or viewing angles. 
      Projects working with these elements might use the <att>type</att> attribute on <gi>graphic</gi> to circumvent this
      problem. 
    </p>
    <p>
      The following example demonstrates the combined use of <gi>zone</gi>s and a <gi>graphic</gi> element:
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <surface>
          <graphic target="image1.jpg" width="3000" height="2000" unit="px"/>
          <zone ulx="300" uly="200" lrx="370" lry="410"/>
          <zone ulx="367" uly="200" lrx="439" lry="410"/>
          <zone ulx="436" uly="200" lrx="512" lry="410"/>
        </surface>
      </egXML>
    </p>
    <p>
      A <gi>zone</gi> may contain <gi>figDesc</gi> or <gi>graphic</gi> elements, which would be used to provide
      descriptive information about the zone or higher resoluted or other additional images of the zone's rectangle. 
    </p>
    <p>
      More often, though, the <att>data</att> attribute on <gi>zone</gi> is used to provide additional information about
      the rectangle. It contains pointers to one or more elements in the content tree of the MEI file, like a <gi>note</gi>,
      <gi>measure</gi> or <gi>del</gi>. 
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <!-- In the facsimile subtree: -->
        <zone xml:id="zone1" data="#measure1"/>
        
        <!-- somewhere in the content: -->
        <measure xml:id="measure1">
          <!-- measure content -->
        </measure>
      </egXML>
    </p>
    <p>
      The elements in the content may also refer to the <gi>facsimile</gi> subtree by themselves using the <att>facs</att>
      attribute, which is made available by the <ident type="class">att.facsimile</ident> attribute class. The last example
      could therefore be encoded with pointers in the other direction:
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <!-- In the facsimile subtree: -->
        <zone xml:id="zone1"/>
        
        <!-- somewhere in the content: -->
        <measure xml:id="measure1" facs="#zone1">
          <!-- measure content -->
        </measure>
      </egXML>
    </p>
    <p>
      The <gi>pb</gi> element defined in the <ref target="#shared">shared module</ref> makes special use of the <att>facs</att>
      attribute, in that it does not point to a <gi>zone</gi>, but a <gi>surface</gi> element instead. A <gi>pb</gi> marks the
      beginning of a page, so it can be concluded that all elements in the content tree which are encoded between any two 
      <gi>pb</gi>s encode musical symbols written on the page (<gi>surface</gi>) referenced by the first of these two <gi>pb</gi>s
      <att>facs</att> attribute. 
    </p>
  </div>
</div>
