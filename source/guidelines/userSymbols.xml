<?xml version="1.0" encoding="UTF-8"?>
<!--
  © 2010 by the Music Encoding Initiative (MEI) Council.
  Licensed under the Creative Commons Attribution-NoDerivs Unported License, 
  Version 3.0 (the "License"); you may not use this file except in compliance with the License.
  You may obtain a copy of the License at http://creativecommons.org/licenses/by-nd/3.0/.
-->

<div xmlns="http://www.tei-c.org/ns/1.0" type="div1" xml:id="userSymbols" n="0" xml:lang="en">
  <head>User-defined Symbols</head>
  <p>This chapter describes the elements, model classes, and attribute classes that are part of the
    MEI.usersymbols module.</p>
  <div type="div2" xml:id="usersymbolsOverview">
    <!-- Overview -->
    <head>Overview of the usersymbols Module</head>
    <p>The module described in this chapter makes available the following components:</p>
    <div type="div3" xml:id="usersymbolsElements">
      <head>Elements</head>
      <p>
        <specList>
          <specDesc key="anchoredText"/>
          <specDesc key="curve"/>
          <specDesc key="line"/>
          <specDesc key="symbol"/>
          <specDesc key="symbolDef"/>
          <specDesc key="symbolTable"/>
        </specList>
      </p>
    </div>
    <div type="div3" xml:id="usersymbolsAttributeClasses">
      <head>Attribute Classes</head>
      <p>No attribute classes are defined in this module.</p>
    </div>
    <div type="div3" xml:id="usersymbolsModelClasses">
      <head>Model Classes</head>
      <p>
        <specList>
          <specDesc key="model.graphicprimitiveLike"/>
          <specDesc key="model.symbolTableLike"/>
        </specList>
      </p>
    </div>
  </div>
  <div>
    <head>Uses of the usersymbol module</head>
    <p> The elements provided by the usersymbol module may be used in two ways: <list type="ordered">
        <item>For defining lines, curves and text elements that cannot be represented by a more
          specific element.</item>
        <item>For defining reusable symbols and special graphical renditions.</item>
      </list>For this purpose, it provides three elements for graphics primitives, &lt;line>,
      &lt;curve> and &lt;anchoredText>. At places where those primitives can be put, the &lt;symbol>
      element can be used as well. The &lt;symbol> element reuses symbols that were defined by
      &lt;symbolDef> elements.</p>
    <div>
      <head>Defining reusable symbols</head>
      <p>&lt;symbolDef>s are using the graphics primitives to describe a symbol. They may also
        combine other symbols defined by other &lt;symbolDef>s using the &lt;symbol> element.</p>
      <figure>
          <head>Definition of a triangle percussion symbol</head>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <symbolDef xml:id="triangleSymbol">
          <line x="0"    y="0"    x2="2.55" y2="4.25"/>
          <line x="2.55" y="4.25" x2="5.1"  y2="0"/>
          <line x="5.1"  y="0"    x2="0.85" y2="0"/>
        </symbolDef>
      </egXML>
      </figure>
      <figure>
        <head>Rendition of the above defined triangle</head>
        <graphic url="Images/modules/usersymbols/triangle.svg"></graphic>
      </figure>
      <figure>
        <head>Symbol composed of the symbol defined above and additional graphics primitives</head>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
          <symbolDef xml:id="triangleSymbolWithStick">
            <symbol ref="#triangleSymbol"/>
            <line x="2.55" y="1.25" x2="5.95" y2="3.4"/>
          </symbolDef>
        </egXML>
      </figure>
      <figure>
        <head>Rendition of the composite triangle symbol</head>
        <graphic url="Images/modules/usersymbols/triangleWithStick.svg"></graphic>
      </figure>
      <head>Elements without semantic implications</head>
      <p>The graphics primitives and symbols can be used directly in the music to describe text and
        lines on a purely graphical level, without implying a specific logical meaning. If possible,
        more meaningful elements should be used. This means for example, "a tempo" or "da capo"
        should in general not be put inside &lt;anchoredText>. Instead, &lt;tempo> and &lt;dir>
        should be used. Likewise, slurs and ties should be encoded using the respective elements,
        not using &lt;curve>, and for glissandi, &lt;gliss> should be used instead of &lt;line>.</p>
      <p>An example usage for &lt;line>s would be the visualization of voice leading, which is not
        covered by a specific MEI element. </p>
      <figure>
        <head>Voice leading visualization as found in an Edition Peters print of Album für die
          Jugend by Schumann, No. 35 (Mignon), measure 6. (Unknown date, plate number is
          10478.)</head>
        <graphic url="Images/modules/usersymbols/mignon.svg"/>
      </figure>
      <figure>
        <head>Encoding of the Schumann example</head>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
          <measure n="6">
            <staff n="1">
              <layer n="1">
                <rest dur="4" xml:id="r1"/>
                <beam>
                  <note pname="c" oct="4" dur="8" xml:id="n1"/>
                  <note pname="e" oct="4" dur="8" xml:id="n2"/>
                </beam>
                <beam>
                  <note pname="g" oct="4" dur="8" xml:id="n3"/>
                  <note pname="e" oct="4" dur="8" xml:id="n4"/>
                  <note pname="b" oct="4" dur="8" xml:id="n5"/>
                  <note pname="g" oct="4" dur="8" xml:id="n6"/>
                </beam>
                <slur startid="#n1" endid="#n6" curvedir="above"/>
              </layer>
              <layer n="2">
                <rest dur="4" sameas="#r1"/>
                <note stem.dir="down" pname="c" oct="4" dur="2" xml:id="n7" next="#n9"/>
              </layer>
            </staff>
            <staff n="2">
              <layer n="1">
                <note pname="g" oct="2" dur="2" dots="1" xml:id="n8"/>
                <note pname="b" oct="3" dur="4" xml:id="n9" prev="#n7 #n8"/>
                <slur startid="#n8" endid="#n9" curvedir="above"/>
              </layer>
            </staff>
            <line startid="#n7" endid="#n9" rend="dotted"/>
          </measure>
        </egXML>
      </figure>
      <head>Defining a specific graphical rendition for a semantic element</head>
      <p>Usersymbols can define the rendition of different elements in two ways. Some elements,
        namely &lt;dir> and &lt;tempo>, can have usersymbol elements as content. This can e.g. be
        used to indicate percussion instruments inside using pictograms.</p>
      <figure>
        <head>Indicating percussion instruments using pictograms</head>
        <figure>
          <graphic url="Images/modules/usersymbols/percussion.svg"/>
        </figure>
      </figure>
      <figure>
        <head>Encoding of above example</head>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
          <section>
            <scoreDef meter.count="4" meter.unit="4">
              <symbolTable>
                <symbolDef xml:id="triangleSymbol">
                  <line x="0"    y="0"    x2="2.55" y2="4.25"/>
                  <line x="2.55" y="4.25" x2="5.1"  y2="0"/>
                  <line x="5.1"  y="0"    x2="0.85" y2="0"/>
                  <line x="2.55" y="1.25" x2="5.95" y2="3.4"/>
                </symbolDef>
                <symbolDef xml:id="cowbellSymbol">
                  <line x="1" y="0" x2="1.8" y2="4"/>
                  <line x="1.8" y="4" x2="4.2" y2="4"/>
                  <line x="4.2" y="4" x2="5" y2="0"/>
                  <line x="5" y="0" x2="1" y2="0"/>
                  <curve x="1" y="4" x2="3" y2="4" bezier="1 5.5 3 5.5"/>
                </symbolDef>
              </symbolTable>
              <staffGrp>
                <staffDef n="1" clef.shape="G" clef.line="2"/>
              </staffGrp>
            </scoreDef>
            <measure n="1">
              <staffDef>
                <instrDef midi.instrname="Open_Triangle"/>
              </staffDef>
              <staff n="1">
                <layer>
                  <dir tstamp="1">
                    <symbol ref="#triangleSymbol"/>
                  </dir>
                  <note dur="1"/>
                </layer>
              </staff>
            </measure>
            <measure n="2">
              <staffDef>
                <instrDef midi.instrname="Cowbell"/>
              </staffDef>
              <staff n="1">
                <layer>
                  <dir tstamp="1">
                    <symbol ref="#cowbellSymbol"/>
                  </dir>
                  <note dur="4"/>
                  <note dur="4"/>
                  <note dur="4"/>
                  <note dur="4"/>
                </layer>
              </staff>
            </measure>
          </section>
        </egXML>
      </figure>
      <p>A number of other elements can point to a symbol for rendering using the @altsym
        attribute.</p>
      <figure>
          <head>Visualizing different treble clef shapes as written by Charpentier</head>
        <graphic url="Images/modules/usersymbols/charpentier.svg"/>
        </figure>
      <figure>
        <head>Defining two staffs, each using its own treble clef shape</head>
        <egXML xmlns="http://www.tei-c.org/ns/Examples">
          <scoreDef>
            <symbolTable>
              <symbolDef xml:id="clefA">
                <curve x="1.2" y="4" bezier="0,4.1 0.2,5.8" x2="1.1" y2="6.6"/>
                <curve x="1.1" y="6.6" bezier="2.1,7.5 3.1,6.9" x2="3" y2="5.3"/>
                <curve x="3" y="5.3" bezier="2.9,2.7 0.6,2.2" x2="0.6" y2="-0.1"/>
                <curve x="0.6" y="-0.1" bezier="0.67,-1.4 2.2,-1.4" x2="2.4" y2="0.23"/>
                <curve x="2.4" y="0.23" bezier="2.6,1.53 1.3,1.43" x2="0.8" y2="0.81"/>
              </symbolDef>
              <symbolDef xml:id="clefB">
                <curve x="2.5" y="1.3" bezier="1.8,1.4 1,0.72" x2="0.7" y2="-0.2"/>
                <curve x="0.7" y="-0.2" bezier="0.43,-0.96 0.75,-2" x2="2" y2="-0.74"/>
                <curve x="2" y="-0.74" bezier="3.4,1.06 2,3.36" x2="1.6" y2="4.36"/>
                <curve x="1.6" y="4.36" bezier="0.71,6.56 2.4,7.66" x2="3.5" y2="6.06"/>
                <curve x="3.5" y="6.06" bezier="4.3,4.86 3.7,2.66" x2="3.7" y2="2.66"/>
              </symbolDef>
            </symbolTable>
            <staffGrp>
              <staffDef n="1">
                <clef shape="G" line="2" altsym="#clefA"/>
              </staffDef>
              <staffDef n="2">
                <clef shape="G" line="2" altsym="#clefB"/>
              </staffDef>
            </staffGrp>
          </scoreDef>
        </egXML>
      </figure>
    </div>
  </div>
</div>
